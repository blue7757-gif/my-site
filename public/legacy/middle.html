<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EST-Sample - 중등자료</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans KR,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";}
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">
  <!-- Header (항상 위에 오도록 z-index 높임) -->
  <header class="border-b bg-white relative z-50">
    <div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between gap-4">
      <div class="flex items-center gap-2 select-none">
        <svg viewBox="0 0 100 100" class="h-7 w-7" aria-hidden="true">
          <defs>
            <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0%" stop-color="#f43f5e" />
              <stop offset="50%" stop-color="#fb923c" />
              <stop offset="100%" stop-color="#22d3ee" />
            </linearGradient>
          </defs>
          <polygon points="25,15 85,50 25,85" fill="url(#g)" />
        </svg>
        <span class="text-2xl font-bold tracking-tight">EST-Sample</span>
      </div>

      <form class="flex items-center gap-2 w-full max-w-md" onsubmit="event.preventDefault();">
        <label class="sr-only" for="top-q">검색어</label>
        <input id="top-q" class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-4 focus:ring-sky-100" placeholder="자료 통합 검색" />
        <button class="rounded-xl bg-sky-600 px-4 py-2 whitespace-nowrap text-white shadow-sm hover:bg-sky-700 active:scale-[.98]" type="submit">검색</button>
      </form>

      <nav class="hidden md:flex items-center gap-4 text-sm text-slate-600" aria-label="보조 링크">
        <a class="hover:text-slate-900" href="#">로그인</a>
        <span class="text-slate-300">|</span>
        <a class="hover:text-slate-900" href="#">회원가입</a>
        <span class="text-slate-300">|</span>
        <a class="hover:text-slate-900" href="#">마이페이지</a>
      </nav>
    </div>

    <!-- Primary tabs (모두 a 링크, 중첩 li 제거, z-index 높임) -->
    <div class="border-t bg-gradient-to-r from-violet-600 via-sky-600 to-cyan-500 relative z-50">
      <div class="mx-auto max-w-6xl px-4">
        <ul id="primary-tabs" class="flex flex-wrap gap-2 py-3 text-sm text-white" role="tablist">
          <li><a href="index.html"  class="tablink inline-block rounded-xl px-16 py-2">내신기출문제</a></li>
          <li><a href="middle.html" class="tablink inline-block rounded-xl px-16 py-2">중등자료</a></li>
          <li><a href="high.html"   class="tablink inline-block rounded-xl px-16 py-2">고등자료</a></li>
          <li><a href="mock.html"   class="tablink inline-block rounded-xl px-16 py-2">모의고사</a></li>
          <li><a href="help.html"   class="tablink inline-block rounded-xl px-16 py-2">이용안내·문의</a></li>
        </ul>
      </div>
    </div>
  </header>

  <!-- Main (헤더보다 아래 레이어로) -->
  <main class="relative z-0 mx-auto max-w-6xl px-4 py-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Left: filters + list -->
    <section class="lg:col-span-2 flex flex-col gap-4">
      <div class="flex items-stretch gap-3">
        <div class="rounded-2xl border bg-white p-4 shadow-sm flex-1" id="filter-card">
          <!-- Row 1 -->
          <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 items-center">
            <select id="si" class="rounded-xl border px-2 py-2 text-sm"><option value="">시/도</option></select>
            <select id="gu" class="rounded-xl border px-2 py-2 text-sm"><option value="">구/군</option></select>
            <select id="level" class="rounded-xl border px-4 py-2 text-sm lg:col-span-2 min-w-0">
              <option value="">중/고등학교</option><option>중학교</option><option>고등학교</option>
            </select>
            <select id="grade" class="rounded-xl border px-2 py-2 text-sm">
              <option value="">학년</option><option>1</option><option>2</option><option>3</option>
            </select>
            <div class="flex items-center gap-2 w-full">
              <button id="searchBtnTop" class="shrink-0 w-24 h-10 rounded-xl bg-sky-600 text-white shadow-sm hover:bg-sky-700">검색</button>
            </div>
          </div>

          <!-- Row 2 -->
          <div class="mt-3 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 items-center">
            <select id="year" class="rounded-xl border px-2 py-2 text-sm"><option value="">기출년도</option></select>
            <select id="exam" class="rounded-xl border px-2 py-2 text-sm"><option value="">중간/기말</option><option>중간</option><option>기말</option></select>
            <input id="keyword" class="rounded-xl border px-3 py-2 text-sm lg:col-span-2" placeholder="학교, 과목, 닉네임, 출판사로 검색" />
            <label class="inline-flex items-center gap-1 text-sm"><input id="need-solution" type="checkbox" class="h-4 w-4 rounded border-slate-300" /><span>해설</span></label>
            <label class="inline-flex items-center gap-1 text-sm"><input id="need-video" type="checkbox" class="h-4 w-4 rounded border-slate-300" /><span>동영상</span></label>
            <button id="uploadBtn" class="h-10 rounded-xl bg-sky-600 text-white shadow-sm hover:bg-sky-700 whitespace-nowrap lg:col-span-1">기출 올리기</button>
          </div>

          <div class="mt-3 text-xs text-slate-500 leading-6">
            <p><span class="text-rose-500">①</span> <span class="font-medium">경제</span>로 검색하면 경제 수학이 검색됩니다.</p>
            <p><span class="text-rose-500">②</span> <span class="font-medium">과제</span>로 검색하시면 수학과제탐구가 검색됩니다.</p>
          </div>
        </div>
      </div>

      <!-- Results list -->
      <div class="rounded-2xl border bg-white shadow-sm overflow-hidden">
        <div class="border-b bg-slate-50 px-4 py-3 text-sm font-semibold">
          <span id="result-title">검색 결과</span>
          <span id="result-count" class="text-slate-400 font-normal"></span>
        </div>
        <div id="results" class="divide-y"></div>
      </div>
    </section>

    <!-- Right: login + notices (생략 동일) -->
    <aside class="flex flex-col gap-4">
      <!-- … (원래 내용 그대로) … -->
    </aside>
  </main>

  <footer class="mt-10 border-t bg-white">
    <div class="mx-auto max-w-6xl px-4 py-8 text-xs text-slate-500">© 2025 PASCAL. All rights reserved.</div>
  </footer>

  <script>
    // 탭 기본 스타일
    document.querySelectorAll('.tablink').forEach(a=>{
      a.classList.add('bg-white/10','hover:bg-white/20','transition');
    });

    // 현재 파일에 맞춰 활성 탭 하이라이트
    (function highlightActiveTab(){
      const current = location.pathname.split('/').pop() || 'index.html';
      document.querySelectorAll('#primary-tabs a').forEach(a=>{
        if(a.getAttribute('href')===current){
          a.setAttribute('aria-current','page');
          a.classList.remove('bg-white/10');
          a.classList.add('bg-white/20','ring-1','ring-white/40');
        }
      });
    })();

    // ----- 아래부터는 기존 검색 데모 코드 (동일) -----
    const DATA=[
      { id:1, schoolName:"원화중학교", si:"인천", gu:"남동구", level:"중학교", grade:1, year:2022, exam:"기말", unit:"중1-1", type:"모두의수학", hasSolution:true, hasVideo:false, subject:"수학", nick:"upsup", publisher:"모두의수학" },
      { id:2, schoolName:"신명여자중학교", si:"서울", gu:"강남구", level:"중학교", grade:1, year:2023, exam:"기말", unit:"중1-1", type:"모두의수학", hasSolution:true, hasVideo:true, subject:"수학", nick:"mstudy", publisher:"모두의수학" },
      { id:3, schoolName:"관교중학교", si:"인천", gu:"남동구", level:"중학교", grade:1, year:2024, exam:"기말", unit:"중1-2", type:"upsup", hasSolution:false, hasVideo:false, subject:"수학", nick:"upsup", publisher:"업섭" },
      { id:4, schoolName:"울산중학교", si:"울산", gu:"남구", level:"중학교", grade:2, year:2024, exam:"기말", unit:"중2-2", type:"공통", hasSolution:true, hasVideo:false, subject:"수학", nick:"hsis0425", publisher:"공통" },
      { id:5, schoolName:"상북중학교", si:"울산", gu:"중구", level:"중학교", grade:2, year:2024, exam:"기말", unit:"중2-2", type:"—", hasSolution:false, hasVideo:false, subject:"수학", nick:"teacherK", publisher:"—" },
      { id:6, schoolName:"경덕사범대부설중", si:"경기", gu:"수원시", level:"중학교", grade:2, year:2024, exam:"기말", unit:"중2-2", type:"—", hasSolution:false, hasVideo:true, subject:"수학", nick:"덕수", publisher:"—" },
      { id:7, schoolName:"법일중학교", si:"부산", gu:"해운대구", level:"중학교", grade:2, year:2024, exam:"기말", unit:"중2-2", type:"—", hasSolution:true, hasVideo:true, subject:"수학", nick:"법중", publisher:"—" },
      { id:8, schoolName:"구월중학교", si:"인천", gu:"남동구", level:"중학교", grade:2, year:2024, exam:"기말", unit:"중2-2", type:"—", hasSolution:false, hasVideo:false, subject:"수학", nick:"구월", publisher:"—" },
      { id:9, schoolName:"충남외국어고등학교", si:"충남", gu:"천안시", level:"고등학교", grade:2, year:2025, exam:"중간", unit:"공통(통합)", type:"공통", hasSolution:true, hasVideo:false, subject:"수학", nick:"nowmath", publisher:"—" },
    ];

    const el=id=>document.getElementById(id);
    const siSel=el('si'), guSel=el('gu'), levelSel=el('level'), gradeSel=el('grade');
    const yearSel=el('year'), examSel=el('exam'), needSolution=el('need-solution'), needVideo=el('need-video');
    const keyword=el('keyword'), results=el('results'), resultCount=el('result-count');

    function initOptions(){
      const sis=[...new Set(DATA.map(d=>d.si))].sort(); for(const s of sis) siSel.append(new Option(s,s));
      const years=[...new Set(DATA.map(d=>d.year))].sort((a,b)=>b-a); for(const y of years) yearSel.append(new Option(y,y));
      fillGu();
    }
    function fillGu(){
      const curSi=siSel.value; guSel.innerHTML=''; guSel.append(new Option('구/군',''));
      if(!curSi) return; const gus=[...new Set(DATA.filter(d=>d.si===curSi).map(d=>d.gu))].sort();
      for(const g of gus) guSel.append(new Option(g,g));
    }
    siSel.addEventListener('change',fillGu);

    function render(list){
      results.innerHTML=''; resultCount.textContent=`(${list.length}건)`;
      if(!list.length){ const empty=document.createElement('div'); empty.className='px-4 py-8 text-sm text-slate-500'; empty.textContent='검색 결과가 없습니다.'; results.append(empty); return; }
      for(const row of list){
        const a=document.createElement('a');
        a.href='#'; /* 목록은 예제로 # 사용 */
        a.className='flex items-center gap-3 px-4 py-3 hover:bg-sky-50 focus:bg-sky-50';
        a.innerHTML=`
          <div class="flex-1 min-w-0">
            <div class="flex flex-wrap items-center gap-x-3 gap-y-1 text-sm">
              <span class="font-medium text-slate-900">${row.schoolName}</span>
              <span class="text-slate-400">|</span>
              <span>${row.grade}학년</span>
              <span class="text-slate-400">|</span>
              <span>${row.year}년</span>
              <span class="text-slate-400">|</span>
              <span>${row.exam==='중간'?'2학기중간':'2학기기말'}</span>
              <span class="text-slate-400">|</span>
              <span class="truncate">${row.unit}</span>
            </div>
            <p class="mt-1 text-xs text-slate-500">유형: ${row.type}${row.hasSolution?' · 해설':''}${row.hasVideo?' · 동영상':''}</p>
          </div>
          <div class="shrink-0 rounded-full ${row.hasVideo?'bg-emerald-100 text-emerald-700 border-emerald-200':'bg-amber-100 text-amber-700 border-amber-200'} px-2 py-0.5 text-[11px] border">${row.hasVideo?'V':'N'}</div>
        `;
        results.append(a);
      }
    }

    function applyFilters(){
      const kw=keyword.value.trim().toLowerCase();
      const topKw=document.getElementById('top-q').value.trim().toLowerCase();
      const allKw=kw||topKw;
      const list=DATA.filter(row=>{
        if(siSel.value && row.si!==siSel.value) return false;
        if(guSel.value && row.gu!==guSel.value) return false;
        if(levelSel.value && row.level!==levelSel.value) return false;
        if(gradeSel.value && String(row.grade)!==gradeSel.value) return false;
        if(yearSel.value && String(row.year)!==yearSel.value) return false;
        if(examSel.value && row.exam!==examSel.value) return false;
        if(needSolution.checked && !row.hasSolution) return false;
        if(needVideo.checked && !row.hasVideo) return false;
        if(allKw){ const hay=`${row.schoolName} ${row.subject} ${row.nick} ${row.publisher}`.toLowerCase(); if(!hay.includes(allKw)) return false; }
        return true;
      });
      render(list);
    }

    document.getElementById('searchBtnTop').addEventListener('click',applyFilters);
    document.getElementById('top-q').addEventListener('keydown',e=>{ if(e.key==='Enter'){ e.preventDefault(); applyFilters(); }});
    document.getElementById('keyword').addEventListener('keydown',e=>{ if(e.key==='Enter'){ e.preventDefault(); applyFilters(); }});
    document.getElementById('uploadBtn').addEventListener('click',()=>alert('업로드 모달은 추후 연결합니다.'));

    initOptions();
    render(DATA);
  </script>
</body>
</html>
